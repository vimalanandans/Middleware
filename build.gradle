buildscript {
    repositories {
        mavenCentral()
        jcenter() //used for jfrog
    }
    ext {
        androidGradleToolsVersion = "2.1.0"
        androidBuildToolsVersion = "23.0.1"
        androidSupportLibraryVersion = "19.+"
        androidCompileSdkVersion = "19"
        androidMinSdkVersion = "16"
        androidTargetSdkVersion = "19"
        androidVersionCode = "1"
        androidVersionName = "1.0"
    }
    dependencies {
        classpath "com.android.tools.build:gradle:${project.androidGradleToolsVersion}"
        classpath "org.jfrog.buildinfo:build-info-extractor-gradle:4.1+"
    }
    ext {
        local = true //change to false for compiling project artifacts from remote maven
    }
}

allprojects {
    apply plugin: 'idea'
    apply plugin: 'maven'

    group = 'com.bezirk'
    version = "3.0.0-alpha"

    ext {
        artifactRepoBase = "https://bezirk.artifactoryonline.com/bezirk"
    }

    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            url "${artifactRepoBase}/libs-release-local/"
            credentials {
                username "${artifactory_user}"
                password "${artifactory_password}"
            }
        }
    }
}

/**
 * Build java distribution. Jars contained in the zip are used to run PC services.
 * Eg. http://52.18.79.103:8090/rishabh.gulati/HelloWorld
 **/
task javaBuildDist(type: Zip) {
    baseName = 'bezirk-java-dist'
    version = project.version
    into 'jars'
    from { project(':core:bezirk-middleware-api').configurations.runtime }
    from { project(':java:libraries:bezirk-factory').configurations.runtime }
    from { project(':core:bezirk-middleware-api').jar }
    from { project(':java:libraries:bezirk-factory').jar }
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}