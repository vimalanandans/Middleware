buildscript {
    repositories {
        mavenCentral()
        jcenter() //used for jfrog
    }
    ext {
        androidGradleToolsVersion = "1.2.3"
        androidBuildToolsVersion = "21.1.2" //upgrade requires upgrade in jenkins
        androidSupportLibraryVersion = "19.+"
        androidCompileSdkVersion = "19"
        androidMinSdkVersion = "16"
        androidTargetSdkVersion = "19"
        androidVersionCode = "1"
        androidVersionName = "1.0"
    }
    dependencies {
        classpath "com.android.tools.build:gradle:${project.androidGradleToolsVersion}"
        classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '4.0.0')
    }
    ext {
        local = true //change to false for compiling project artifacts from remote maven
    }
}

allprojects {
    apply plugin: 'idea'
    apply plugin: 'maven'

    group = 'com.bezirk'
    version = "2.0.5"

    ext {
        artifactRepoBase_old = "http://cr-scm01.de.bosch.com:8081/nexus/content/repositories"
        artifactRepoBase = "https://bezirk.artifactoryonline.com/bezirk"
    }

    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            url "${artifactRepoBase_old}/central/"
            credentials {
                // Define "nexus_user" and "nexus_password" in ~/.gradle/gradle.properties
                username nexus_user
                password nexus_password
            }
        }
        maven {
            url "${artifactRepoBase_old}/upa-public/"
            credentials {
                username nexus_user
                password nexus_password
            }
        }
        maven {
            url "${artifactRepoBase}/libs-release-local/"
            credentials {
                username "${artifactory_user}"
                password "${artifactory_password}"
            }
        }
    }
}

/**
 * Build java distribution. Jars contained in the zip are used to run PC services.
 * Eg. http://52.18.79.103:8090/rishabh.gulati/HelloWorld
 **/
task javaBuildDist(type: Zip) {
    baseName = 'bezirk-java-dist'
    version = project.version
    into 'jars'
    from { project(':core:bezirk-api').configurations.runtime }
    from { project(':java:libraries:bezirk-factory').configurations.runtime }
    from { project(':core:bezirk-api').jar }
    from { project(':java:libraries:bezirk-factory').jar }
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}